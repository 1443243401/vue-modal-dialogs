!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.VueModalDialogs=e()}(this,function(){"use strict";function n(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return n[t]}function e(){function n(n,t){s(t,function(t,o){var r=n[o];null==r?n[o]=t:c(r)&&c(t)&&(n[o]=e(r,t))})}for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];var r={};return t.forEach(function(e){return e&&n(r,e)}),r}function t(n){return null!=n&&("object"==typeof n||"function"==typeof n)&&"VueComponent"!==Object.getPrototypeOf(n).constructor.name&&("function"==typeof n&&"VueComponent"===n.name||Array.isArray(n.staticRenderFns)||"function"==typeof n.render)}function o(n){return"object"!=typeof n&&(n={}),n.wrapper&&"object"!=typeof n.wrapper&&(n.wrapper=void 0),!1===n.zIndex?n.zIndex={value:null,autoIncrement:!1}:n.zIndex&&"object"!=typeof n.zIndex&&(n.zIndex=void 0),e(n,{wrapper:{class:"modal-dialogs-wrapper",props:{tag:"div",name:"modal-dialog"}},zIndex:{value:1e3,autoIncrement:!0}})}function r(n,e){return Object.keys(n).reduce(function(t,o){return-1===e.indexOf(o)&&(t[o]=n[o]),t},{})}function i(t,i){i=o(i);var u=0;return t.extend({name:"ModalDialogsWrapper",data:function(){return{dialogs:[]}},methods:{add:function(n){for(var e=this,t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];var r=u++,a=-1;return new Promise(function(o,s){a=e.dialogs.push(Object.freeze({id:r,resolve:o,args:t,options:n,zIndex:i.zIndex.value,close:e.close.bind(e,u)}))-1,i.zIndex.autoIncrement&&++i.zIndex.value}).then(function(n){return a>-1&&e.dialogs.splice(a,1),n})},close:function(e,t){var o=n(this.dialogs,function(n){return n.id===e});o&&o.resolve(t)}},render:function(n){return n("transition-group",i.wrapper,this.dialogs.map(function(t){var o=t.options.args.reduce(function(n,e,o){return n[e]=t.args[o],n},{args:t.args}),i=e(t.options,{key:t.id,style:{zIndex:t.zIndex},props:o,on:{close:t.close}});return n(t.options.component,r(i,d))}))}})}var u=function(n,e,t){for(var o in n)if(!1===e.call(t,n[o],o,n))break},a=Object.prototype.hasOwnProperty,s=function(n,e,t){u(n,function(o,r){if(a.call(n,r))return e.call(t,n[r],r,n)})},c=function(n){return void 0!==n&&null!==n&&("object"==typeof n||"function"==typeof n)},d=["component","args","inject"],l=function(){this.Vue=null,this.dialogsWrapper=null,this.dialogFunctions={},this.inject=!0};return l.prototype.install=function(n,t){t=e(t,{el:null,inject:!0}),this.Vue=n,this.Vue.prototype.$dialogs=this;var o=t.el;"string"==typeof o&&(o=document.querySelector(o)),null==o&&(o=document.createElement("div"),document.body.insertBefore(o,document.body.childNodes[0])),this.inject=t.inject;var r=i(n,t);this.dialogsWrapper=new r,this.dialogsWrapper.$mount(o)},l.prototype.add=function(n,e){for(var o=[],r=arguments.length-2;r-- >0;)o[r]=arguments[r+2];var i=this.inject;if(n=n.toString().trim(),!this.dialogFunctions.hasOwnProperty(n)&&(0!==o.length||t(e)||(o=e.args||[],"boolean"==typeof e.inject&&(i=e.inject),e=e.component),t(e))){this.dialogFunctions[n]={component:this.Vue.extend({extends:e,methods:{$close:function(n){this.$emit("close",n)}}}),args:o};var u=this.show.bind(this,n);return i&&(this.Vue.prototype["$"+n]=u),this.hasOwnProperty(n)||(this[n]=u),u}},l.prototype.show=function(n){for(var e=this,t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];return new Promise(function(o,r){if(!e.dialogFunctions.hasOwnProperty(n))return r(new Error("Modal dialog "+n+" is not found."));o((i=e.dialogsWrapper).add.apply(i,[e.dialogFunctions[n]].concat(t)));var i})},new l});