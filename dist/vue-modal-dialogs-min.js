!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.VueModalDialogs=n()}(this,function(){"use strict";function e(e,n){for(var o=0;o<e.length;o++)if(n(e[o]))return e[o]}function n(e,n){for(var o=0;o<e.length;o++)if(n(e[o]))return o;return-1}function o(){function e(e,n){u(n,function(n,t){var r=e[t];null==r?e[t]=n:d(r)&&d(n)&&(e[t]=o(r,n))})}for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];var r={};return n.forEach(function(n){return n&&e(r,n)}),r}function t(e){return null!=e&&("object"==typeof e||"function"==typeof e)&&"VueComponent"!==Object.getPrototypeOf(e).constructor.name&&("function"==typeof e&&"VueComponent"===e.name||Array.isArray(e.staticRenderFns)||"function"==typeof e.render)}function r(e){return"object"!=typeof e&&(e={}),e.wrapper&&"object"!=typeof e.wrapper&&(e.wrapper=void 0),!1===e.zIndex?e.zIndex={value:null,autoIncrement:!1}:e.zIndex&&"object"!=typeof e.zIndex&&(e.zIndex=void 0),o(e,{wrapper:{class:"modal-dialogs-wrapper",props:{tag:"div",name:"modal-dialog"}},zIndex:{value:1e3,autoIncrement:!0}})}function i(t,i){i=r(i);var a=0;return t.extend({name:"ModalDialogsWrapper",data:function(){return{dialogs:[]}},methods:{add:function(e){for(var o=this,t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return new Promise(function(n,r){o.dialogs.push(Object.freeze({id:a,resolve:n,reject:r,args:t,options:e,zIndex:i.zIndex.value,close:o.close.bind(o,a)})),++a,i.zIndex.autoIncrement&&++i.zIndex.value}).then(function(e){var t=e.id,r=e.data,i=n(o.dialogs,function(e){return e.id===t});return i>-1&&o.dialogs.splice(i,1),r})},close:function(n,o){var t=e(this.dialogs,function(e){return e.id===n});t&&t.resolve({id:n,data:o})}},render:function(e){for(var n=this,t=[],r=0;r<this.dialogs.length;r++)!function(r){var i=n.dialogs[r],a={args:i.args};i.options.args.forEach(function(e,n){a[e]=i.args[n]});var s=o(i.options,{key:i.id,style:{zIndex:i.zIndex},props:a,on:{close:i.close}});delete s.component,delete s.args,t.push(e(i.options.component,s))}(r);return e("transition-group",i.wrapper,t)}})}var a=function(e,n,o){for(var t in e)if(!1===n.call(o,e[t],t,e))break},s=Object.prototype.hasOwnProperty,u=function(e,n,o){a(e,function(t,r){if(s.call(e,r))return n.call(o,e[r],r,e)})},d=function(e){return void 0!==e&&null!==e&&("object"==typeof e||"function"==typeof e)},l=function(){this.Vue=null,this.debug=!1,this.dialogsWrapper=null,this.dialogFunctions={},this.inject=!0};return l.prototype.install=function(e,n){n=o(n,{el:null,inject:!0}),this.Vue=e,this.Vue.prototype.$dialogs=this;var t=n.el;"string"==typeof t&&(t=document.querySelector(t)),null==t&&(t=document.createElement("div"),document.body.insertBefore(t,document.body.childNodes[0])),this.inject=n.inject;var r=i(e,n);this.dialogsWrapper=new r,this.dialogsWrapper.$mount(t)},l.prototype.add=function(e,n){for(var o=[],r=arguments.length-2;r-- >0;)o[r]=arguments[r+2];e=e.toString().trim(),this.dialogFunctions.hasOwnProperty(e)?this.debug&&console.error("[vue-modal-dialogs] Another modal function "+e+" is already exist."):(0!==o.length||t(n)||(o=n.args||[],n=n.component),t(n)?(this.dialogFunctions[e]={component:this.Vue.extend({extends:n,methods:{$close:function(e){this.$emit("close",e)}}}),args:o},this.inject&&(this.Vue.prototype["$"+e]=this.show.bind(this,e))):this.debug&&console.error("[vue-modal-dialogs]",n,"is not a Vue component constructor"))},l.prototype.show=function(e){for(var n=this,o=[],t=arguments.length-1;t-- >0;)o[t]=arguments[t+1];return new Promise(function(t,r){if(!n.dialogFunctions.hasOwnProperty(e))return n.debug&&console.error("[vue-modal-dialogs] Modal dialog "+e+" is not found."),r(new Error("Modal dialog "+e+" is not found."));t((i=n.dialogsWrapper).add.apply(i,[n.dialogFunctions[e]].concat(o)));var i})},new l});