!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.VueModalDialogs=e()}(this,function(){"use strict";function n(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return n[t]}function e(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t;return-1}function t(){function n(n,e){c(e,function(e,o){var r=n[o];null==r?n[o]=e:d(r)&&d(e)&&(n[o]=t(r,e))})}for(var e=[],o=arguments.length;o--;)e[o]=arguments[o];var r={};return e.forEach(function(e){return e&&n(r,e)}),r}function o(n){return null!=n&&("object"==typeof n||"function"==typeof n)&&"VueComponent"!==Object.getPrototypeOf(n).constructor.name&&("function"==typeof n&&"VueComponent"===n.name||Array.isArray(n.staticRenderFns)||"function"==typeof n.render)}function r(n){return"object"!=typeof n&&(n={}),n.wrapper&&"object"!=typeof n.wrapper&&(n.wrapper=void 0),!1===n.zIndex?n.zIndex={value:null,autoIncrement:!1}:n.zIndex&&"object"!=typeof n.zIndex&&(n.zIndex=void 0),t(n,{wrapper:{class:"modal-dialogs-wrapper",props:{tag:"div",name:"modal-dialog"}},zIndex:{value:1e3,autoIncrement:!0}})}function i(n,e){return Object.keys(n).reduce(function(t,o){return-1===e.indexOf(o)&&(t[o]=n[o]),t},{})}function a(o,a){a=r(a);var u=0;return o.extend({name:"ModalDialogsWrapper",data:function(){return{dialogs:[]}},methods:{add:function(n){for(var t=this,o=[],r=arguments.length-1;r-- >0;)o[r]=arguments[r+1];return new Promise(function(e,r){t.dialogs.push(Object.freeze({id:u,resolve:e,args:o,options:n,zIndex:a.zIndex.value,close:t.close.bind(t,u)})),++u,a.zIndex.autoIncrement&&++a.zIndex.value}).then(function(n){var o=n.id,r=n.data,i=e(t.dialogs,function(n){return n.id===o});return i>-1&&t.dialogs.splice(i,1),r})},close:function(e,t){var o=n(this.dialogs,function(n){return n.id===e});o&&o.resolve({id:e,data:t})}},render:function(n){return n("transition-group",a.wrapper,this.dialogs.map(function(e){var o=e.options.args.reduce(function(n,t,o){return n[t]=e.args[o],n},{args:e.args}),r=t(e.options,{key:e.id,style:{zIndex:e.zIndex},props:o,on:{close:e.close}});return n(e.options.component,i(r,l))}))}})}var u=function(n,e,t){for(var o in n)if(!1===e.call(t,n[o],o,n))break},s=Object.prototype.hasOwnProperty,c=function(n,e,t){u(n,function(o,r){if(s.call(n,r))return e.call(t,n[r],r,n)})},d=function(n){return void 0!==n&&null!==n&&("object"==typeof n||"function"==typeof n)},l=["component","args","inject"],f=function(){this.Vue=null,this.debug=!1,this.dialogsWrapper=null,this.dialogFunctions={},this.inject=!0};return f.prototype.install=function(n,e){e=t(e,{el:null,inject:!0}),this.Vue=n,this.Vue.prototype.$dialogs=this;var o=e.el;"string"==typeof o&&(o=document.querySelector(o)),null==o&&(o=document.createElement("div"),document.body.insertBefore(o,document.body.childNodes[0])),this.inject=e.inject;var r=a(n,e);this.dialogsWrapper=new r,this.dialogsWrapper.$mount(o)},f.prototype.add=function(n,e){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];var i=this.inject;n=n.toString().trim(),this.dialogFunctions.hasOwnProperty(n)?this.debug&&console.error("[vue-modal-dialogs] Another modal function "+n+" is already exist."):(0!==t.length||o(e)||(t=e.args||[],"boolean"==typeof(e=e.component).inject&&(i=e.inject)),o(e)?(this.dialogFunctions[n]={component:this.Vue.extend({extends:e,methods:{$close:function(n){this.$emit("close",n)}}}),args:t},i&&(this.Vue.prototype["$"+n]=this.show.bind(this,n))):this.debug&&console.error("[vue-modal-dialogs]",e,"is not a Vue component constructor"))},f.prototype.show=function(n){for(var e=this,t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];return new Promise(function(o,r){if(!e.dialogFunctions.hasOwnProperty(n))return e.debug&&console.error("[vue-modal-dialogs] Modal dialog "+n+" is not found."),r(new Error("Modal dialog "+n+" is not found."));o((i=e.dialogsWrapper).add.apply(i,[e.dialogFunctions[n]].concat(t)));var i})},new f});